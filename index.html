<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, shrink-to-fit=no"
		/>
		<link rel="stylesheet" href="assets/css/reset.css" />
		<!-- Bootstrap CSS -->
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
			integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="assets/css/style.css" />
		<title>Word Guess Game</title>
	</head>

	<body>
		<div class="container">
			<div class="jumbotron" style="text-align: center;">
				<H1>Armored Vehicle Identification</H1>
				<p id="instruct">Press any key to begin.</p>
			</div>
			<div class="row">
				<!-- Entire Left Column -->
				<div class="col-lg-6">
					<div class="card mb-2">
						<h3 class="card-header">
							Tank Name or Nomenclature
						</h3>
						<div class="card-body text-center">
							<h1 id="spacesID"></h1>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-6">
							<div class="card mb-2">
								<h3 class="card-header">
									Incorrect Guesses
								</h3>
								<div class="card-body text-center">
									<h1 id="wrongGuessesID"></h1>
								</div>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="card mb-2">
								<h3 class="card-header">
									Guesses Remaining
								</h3>
								<div class="card-body text-center">
									<h1 id="guessesLeftID"></h1>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- Entire Right Column -->
				<div class="col-lg-6">
					<img
						src="assets/images/tanks.jpg"
						class="img-fluid"
						alt="Responsive image"
						id="tankImg"
					/>
				</div>
			</div>
		</div>

		<!-- Optional JavaScript -->
		<script type="text/javascript" src="assets/javascript/game.js"></script>
		<script>
			// Tank names, used to generate images as well
			var tankArray = [
				"abrams",
				"armata",
				"challenger",
				"leclerc",
				"leopard",
				"merkava",
				"patton",
				"sheridan",
				"sherman",
				"t34",
				"t72",
				"tiger"
			];

			// Declare initial variables
			var gameInProgress = false;
			var pickedTank = "tanks";
			var guessesLeft = 10;
			var tankNameArr = [];
			var userGuess = "";
			var userGuessArr = [];
			var wrongGuesses = [];
			var gameIsWon = false;
			var gamesWon = 0;
			var instructions = "Press any key to start.";

			function display() {
				// Hook JS into HTML by ID
				document.getElementById("tankImg").src =
					"assets/images/" + pickedTank + ".jpg";
				document.getElementById("instruct").innerHTML = instructions;
				document.getElementById(
					"wrongGuessesID"
				).innerHTML = wrongGuesses.toString();
				document.getElementById(
					"guessesLeftID"
				).innerHTML = guessesLeft;
			}

			// Initialize vars
			function initializer() {
				pickedTank = "tanks";
				guessesLeft = 10;
				tankNameArr = [];
				userGuess = "";
				userGuessArr = [];
				wrongGuesses = [];
				instructions = "Press any letter or number to make a guess.";
			}

			// Picks random tank name from tank array
			function tankPicker() {
				var rando = Math.floor(Math.random() * tankArray.length);
				return tankArray[rando];
			}

			// Setup game - doesn't store key press
			function gameSetup() {
				tankNameArr = Array.from(pickedTank);
				console.log("tankNameArr =" + tankNameArr);
				fillInSpaces();
				gameInProgress = true;
			}

			function checkGuessUnique() {
				if (userGuessArr.includes(userGuess)) {
					return false;
				} else {
					userGuessArr.push(userGuess);
					checkGuessInTank();
				}
			}

			function checkGuessInTank() {
				if (tankNameArr.includes(userGuess)) {
					fillInSpaces();
				} else {
					guessesLeft--;
					wrongGuesses.push(userGuess);
				}
			}

			function fillInSpaces() {
				var spacesArr = [];
				for (var i = 0; i < tankNameArr.length; i++) {
					if (userGuessArr.includes(tankNameArr[i])) {
						spacesArr.push(tankNameArr[i]);
					} else {
						spacesArr.push("_");
					}
				}
				var spacesStr = spacesArr.toString("");
				document.getElementById("spacesID").innerHTML = spacesStr;
				console.log(
					"spacesStr: " +
						spacesStr +
						", spacesArr: " +
						spacesArr +
						", tankNameArr: " +
						tankNameArr
				);
				if (spacesArr === tankNameArr) {
					gameWon();
				}
			}

			function gameWon() {
				gameIsWon = true;
				gamesWon++;
				gameInProgress = false;
				instructions = "You won!";
			}

			document.onkeypress = function() {
				if (gameInProgress) {
					userGuess = event.key;
					checkGuessUnique();
					display();
				} else {
					initializer();
					display();
					pickedTank = tankPicker();
					display();
					gameSetup();
					display();
				}
			};
		</script>
		<!-- 
		Pseudo Code
		
		1.	User presses key to make game start	
		2.  Computer chooses a word for user to guess
		3.  Display underline spaces between quotes corresponding to the number of letters in the chosen word.
		4. 	User enters a letter 
		5. 	compare user letter to word letters
		6. 	if user letter matches word letter, replace corresponding underline space with user letter
		7.  else, display letter below in incorrect guess area, decrement remaining guesses by one
		-->
	</body>
</html>
