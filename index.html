<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, shrink-to-fit=no"
		/>
		<link rel="stylesheet" href="assets/css/reset.css" />
		<!-- Bootstrap CSS -->
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
			integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="assets/css/style.css" />
		<title>Word Guess Game</title>
	</head>

	<body>
		<div class="container">
			<div class="jumbotron" style="text-align: center;">
				<H1>Armored Vehicle Identification</H1>
				<p>Press any key to begin.</p>
			</div>
			<div class="row">
				<!-- Entire Left Column -->
				<div class="col-lg-6">
					<div class="card mb-2">
						<h3 class="card-header">
							Tank Name or Nomenclature
						</h3>
						<div class="card-body text-center">
							<h1 id="spacesID"></h1>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-6">
							<div class="card mb-2">
								<h3 class="card-header">
									Incorrect Guesses
								</h3>
								<div class="card-body text-center">
									<h1 id="wrongGuessesID"></h1>
								</div>
							</div>
						</div>
						<div class="col-lg-6">
							<div class="card mb-2">
								<h3 class="card-header">
									Guesses Remaining
								</h3>
								<div class="card-body text-center">
									<h1 id="guessesLeftID"></h1>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- Entire Right Column -->
				<div class="col-lg-6">
					<img
						src="assets/images/tanks.jpg"
						class="img-fluid"
						alt="Responsive image"
						id="tankImg"
					/>
				</div>
			</div>
		</div>

		<!-- Optional JavaScript -->
		<script type="text/javascript" src="assets/javascript/game.js"></script>
		<script>
			var tankArray = [
				"abrams",
				"armata",
				"challenger",
				"leclerc",
				"leopard",
				"merkava",
				"patton",
				"sheridan",
				"sherman",
				"t34",
				"t72",
				"tiger"
			];

			// Declare initial variables
			var gameInProgress = false;
			var pickedTank = "";
			var spacesVar = "";
			var spacesArr = [];
			var guessesLeft = 10;
			var tankNameArr = [];
			var userGuess = "";
			var userGuessArr = [];
			var wrongGuesses = [];

			// Initialize vars
			function initializer() {
				pickedTank = "";
				spacesVar = "";
				spacesArr = [];
				guessesLeft = 10;
				tankNameArr = [];
				userGuess = "";
				userGuessArr = [];
			}

			// Picks random tank name from tank array
			function tankPicker() {
				var rando = Math.floor(Math.random() * tankArray.length);
				return tankArray[rando];
			}

			// Display tank image matching pickedTank/tankName
			function displayTank(tankName) {
				document.getElementById("tankImg").src =
					"assets/images/" + tankName + ".jpg";
				console.log("assets/images/" + tankName + ".jpg");
			}

			// Runs the user interface
			function theMachine() {
				if (gameInProgress) {
					if (!userGuessArr.includes(userGuess)) {
						//push userGuess to guessed array
						userGuessArr.push(userGuess);
						console.log(
							`User Guess ${userGuess}, User Guess Array ${userGuessArr}`
						);
						var successCheck = spacesArr;
						spacesArr = 0;
						for (i = 0; i < tankNameArr; i++) {
							if (userGuessArr.includes(tankNameArr[i])) {
								spacesArr.push(tankNameArr[i]);
							} else {
								spacesArr.push("_");
							}
						}
						if (spacesArr === successCheck) {
							guessesLeft--;
							wrongGuesses.push(userGuess);
						}
						spacesVar = spacesArr.toString();
						document.getElementById(
							"spacesID"
						).innerHTML = spacesVar;
						document.getElementById(
							"wrongGuessesID"
						).innerHTML = wrongGuesses.toString();
						document.getElementById(
							"guessesLeftID"
						).innerHTML = guessesLeft;
					} else {
						return false;
					}
				} else {
					//Initialize game - doesn't store key press
					tankNameArr = Array.from(pickedTank);
					console.log("tankNameArr =" + tankNameArr);
					for (var i = 0; i < pickedTank.length; i++) {
						spacesArr += "_";
					}

					spacesVar = spacesArr.toString("");

					document.getElementById("spacesID").innerHTML = spacesVar;
					document.getElementById(
						"guessesLeftID"
					).innerHTML = guessesLeft;
				}
			}

			document.onkeypress = function() {
				if (gameInProgress) {
					userGuess = event.key;
					theMachine();
				} else {
					initializer();
					pickedTank = tankPicker();
					displayTank(pickedTank);
					theMachine();
					gameInProgress = true;
				}
			};
		</script>

		<!-- comments -->

		<!-- 
	User presses key to make game start
	
	Computer chooses a word for user to guess
	
	Display underline spaces between quotes corresponding to the number of letters in the chosen word
	
	User enters a letter 
	
	compare user letter to word letters
	
	if user letter matches word letter, replace corresponding underline space with user letter

	else, display letter below in incorrect guess area, decrement remaining guesses by one
	-->
	</body>
</html>
